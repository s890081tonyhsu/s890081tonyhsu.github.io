!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Ractive.events.tap=b()}(this,function(){"use strict";function d(a,b){return new e(a,b)}function f(a){this.__tap_handler__.mousedown(a)}function g(a){this.__tap_handler__.touchdown(a)}function h(){this.addEventListener("keydown",j,!1),this.addEventListener("blur",i,!1)}function i(){this.removeEventListener("keydown",j,!1),this.removeEventListener("blur",i,!1)}function j(a){32===a.which&&this.__tap_handler__.fire()}var a=d,b=5,c=400,e=function(b,c){this.node=b,this.callback=c,this.preventMousedownEvents=!1,this.bind(b)};return e.prototype={bind:function(b){window.navigator.pointerEnabled?b.addEventListener("pointerdown",f,!1):window.navigator.msPointerEnabled?b.addEventListener("MSPointerDown",f,!1):b.addEventListener("mousedown",f,!1),b.addEventListener("touchstart",g,!1),"BUTTON"!==b.tagName&&"button"!==b.type||b.addEventListener("focus",h,!1),b.__tap_handler__=this},fire:function(b,c,d){this.callback({node:this.node,original:b,x:c,y:d})},mousedown:function(d){var e=this;if(!this.preventMousedownEvents&&(void 0===d.which||1===d.which)){var f=d.clientX,g=d.clientY,h=d.pointerId,i=function(a){a.pointerId==h&&(e.fire(a,f,g),k())},j=function(a){a.pointerId==h&&(Math.abs(a.clientX-f)>=b||Math.abs(a.clientY-g)>=b)&&k()},k=function(){e.node.removeEventListener("MSPointerUp",i,!1),document.removeEventListener("MSPointerMove",j,!1),document.removeEventListener("MSPointerCancel",k,!1),e.node.removeEventListener("pointerup",i,!1),document.removeEventListener("pointermove",j,!1),document.removeEventListener("pointercancel",k,!1),e.node.removeEventListener("click",i,!1),document.removeEventListener("mousemove",j,!1)};window.navigator.pointerEnabled?(this.node.addEventListener("pointerup",i,!1),document.addEventListener("pointermove",j,!1),document.addEventListener("pointercancel",k,!1)):window.navigator.msPointerEnabled?(this.node.addEventListener("MSPointerUp",i,!1),document.addEventListener("MSPointerMove",j,!1),document.addEventListener("MSPointerCancel",k,!1)):(this.node.addEventListener("click",i,!1),document.addEventListener("mousemove",j,!1)),setTimeout(k,c)}},touchdown:function(){var d=this,e=event.touches[0],f=e.clientX,g=e.clientY,h=e.identifier,i=function(a){var b=a.changedTouches[0];return b.identifier!==h?void k():(a.preventDefault(),d.preventMousedownEvents=!0,clearTimeout(d.preventMousedownTimeout),d.preventMousedownTimeout=setTimeout(function(){d.preventMousedownEvents=!1},400),d.fire(a,f,g),void k())},j=function(a){var c;1===a.touches.length&&a.touches[0].identifier===h||k(),c=a.touches[0],(Math.abs(c.clientX-f)>=b||Math.abs(c.clientY-g)>=b)&&k()},k=function(){d.node.removeEventListener("touchend",i,!1),window.removeEventListener("touchmove",j,!1),window.removeEventListener("touchcancel",k,!1)};this.node.addEventListener("touchend",i,!1),window.addEventListener("touchmove",j,!1),window.addEventListener("touchcancel",k,!1),setTimeout(k,c)},teardown:function(){var b=this.node;b.removeEventListener("pointerdown",f,!1),b.removeEventListener("MSPointerDown",f,!1),b.removeEventListener("mousedown",f,!1),b.removeEventListener("touchstart",g,!1),b.removeEventListener("focus",h,!1)}},a});